(function(){var n=$('<div id="galleryOverlay">'),e=$('<div id="gallerySlider">'),o=$('<a id="prevArrow"></a>'),t=$('<a id="nextArrow"></a>'),i=!1;$.fn.touchTouch=function(){function c(e){return!i&&(n.show(),setTimeout(function(){n.addClass("visible")},100),a(e),void(i=!0))}function u(){return!!i&&(n.hide().removeClass("visible"),void(i=!1))}function a(n){e.css("left",100*-n+"%")}function r(n){setTimeout(function(){l(n)},1e3)}function l(n){return!(n<0||n>=g.length)&&void d(g.eq(n).attr("href"),function(){h.eq(n).html(this)})}function d(n,e){var o=$("<img>").on("load",function(){e.call(o)});o.attr("src",n)}function f(){v+1<g.length?(v++,a(v),r(v+1)):(e.addClass("rightSpring"),setTimeout(function(){e.removeClass("rightSpring")},500))}function s(){v>0?(v--,a(v),r(v-1)):(e.addClass("leftSpring"),setTimeout(function(){e.removeClass("leftSpring")},500))}e.empty();var h=$([]),v=0,g=this;n.hide().appendTo("body"),e.appendTo(n),g.each(function(){h=h.add($('<div class="placeholder">'))}),e.append(h).on("click",function(n){$(n.target).is("img")||u()}),$("body").on("touchstart","#gallerySlider img",function(n){var o=n.originalEvent,t=o.changedTouches[0].pageX;return e.on("touchmove",function(n){n.preventDefault(),o=n.originalEvent.touches[0]||n.originalEvent.changedTouches[0],o.pageX-t>10?(e.off("touchmove"),s()):o.pageX-t<-10&&(e.off("touchmove"),f())}),!1}).on("touchend",function(){e.off("touchmove")}),g.on("click",function(n){n.preventDefault(),v=g.index(this),c(v),l(v),r(v+1),r(v-1)}),"ontouchstart"in window||(n.append(o).append(t),o.click(function(n){n.preventDefault(),s()}),t.click(function(n){n.preventDefault(),f()})),$(window).bind("keydown",function(n){37==n.keyCode?s():39==n.keyCode&&f()})}})(jQuery);
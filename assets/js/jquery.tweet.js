!function(e){e.fn.tweet=function(t){function r(e,t){if("string"==typeof e){var r=e;for(var a in t){var n=t[a];r=r.replace(new RegExp("{"+a+"}","g"),null===n?"":n)}return r}return e(t)}function a(t,r){return function(){var a=[];return this.each(function(){a.push(this.replace(t,r))}),e(a)}}function n(e){return e.replace(/</g,"&lt;").replace(/>/g,"^&gt;")}function i(e,t){return e.replace(p,function(e){for(var r=/^[a-z]+:/i.test(e)?e:"http://"+e,a=e,i=0;i<t.length;++i){var s=t[i];if(s.url==r&&s.expanded_url){r=s.expanded_url,a=s.display_url;break}}return'<a href="'+n(r)+'">'+n(a)+"</a>"})}function s(e){return Date.parse(e.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i,"$1,$2$4$3"))}function o(e){var t=arguments.length>1?arguments[1]:new Date,r=parseInt((t.getTime()-e)/1e3,10),a="";return a=r<1?"just now":r<60?r+" seconds ago":r<120?"a minute ago":r<2700?parseInt(r/60,10).toString()+" minutes ago":r<7200?"an hour ago":r<86400?""+parseInt(r/3600,10).toString()+" hours ago":r<172800?"a day ago":parseInt(r/86400,10).toString()+" days ago","about "+a}function _(e){return e.match(/^(@([A-Za-z0-9-_]+)) .*/i)?w.auto_join_text_reply:e.match(p)?w.auto_join_text_url:e.match(/^((\w+ed)|just) .*/im)?w.auto_join_text_ed:e.match(/^(\w*ing) .*/i)?w.auto_join_text_ing:w.auto_join_text_default}function u(){var e="https:"==document.location.protocol?"https:":"http:",t=null===w.fetch?w.count:w.fetch,r="&include_entities=1&callback=?";if(w.list)return e+"//"+w.twitter_api_url+"/1/"+w.username[0]+"/lists/"+w.list+"/statuses.json?page="+w.page+"&per_page="+t+r;if(w.favorites)return e+"//"+w.twitter_api_url+"/favorites/"+w.username[0]+".json?page="+w.page+"&count="+t+r;if(null===w.query&&1==w.username.length)return e+"//"+w.twitter_api_url+"/1/statuses/user_timeline.json?screen_name="+w.username[0]+"&count="+t+(w.retweets?"&include_rts=1":"")+"&page="+w.page+r;var a=w.query||"from:"+w.username.join(" OR from:");return e+"//"+w.twitter_search_url+"/search.json?&q="+encodeURIComponent(a)+"&rpp="+t+"&page="+w.page+r}function l(e,t){return t?"user"in e?e.user.profile_image_url_https:l(e,!1).replace(/^http:\/\/[a-z0-9]{1,3}\.twimg\.com\//,"https://s3.amazonaws.com/twitter_production/"):e.profile_image_url||e.user.profile_image_url}function c(t){var a={};return a.item=t,a.source=t.source,a.screen_name=t.from_user||t.user.screen_name,a.avatar_size=w.avatar_size,a.avatar_url=l(t,"https:"===document.location.protocol),a.retweet="undefined"!=typeof t.retweeted_status,a.tweet_time=s(t.created_at),a.join_text="auto"==w.join_text?_(t.text):w.join_text,a.tweet_id=t.id_str,a.twitter_base="http://"+w.twitter_url+"/",a.user_url=a.twitter_base+a.screen_name,a.tweet_url=a.user_url+"/status/"+a.tweet_id,a.reply_url=a.twitter_base+"intent/tweet?in_reply_to="+a.tweet_id,a.retweet_url=a.twitter_base+"intent/retweet?tweet_id="+a.tweet_id,a.favorite_url=a.twitter_base+"intent/favorite?tweet_id="+a.tweet_id,a.retweeted_screen_name=a.retweet&&t.retweeted_status.user.screen_name,a.tweet_relative_time=o(a.tweet_time),a.entities=t.entities?(t.entities.urls||[]).concat(t.entities.media||[]):[],a.tweet_raw_text=a.retweet?"RT @"+a.retweeted_screen_name+" "+t.retweeted_status.text:t.text,a.tweet_text=e([i(a.tweet_raw_text,a.entities)]).linkUser().linkHash()[0],a.tweet_text_fancy=e([a.tweet_text]).makeHeart().capAwesome().capEpic()[0],a.user=r('<a class="tweet_user" href="{user_url}">{screen_name}</a>',a),a.join=w.join_text?r(' <span class="tweet_join">{join_text}</span> ',a):" ",a.avatar=a.avatar_size?r('<a class="tweet_avatar" href="{user_url}"><img src="{avatar_url}" height="{avatar_size}" width="{avatar_size}" alt="{screen_name}\'s avatar" title="{screen_name}\'s avatar" border="0"/></a>',a):"",a.time=r('<span class="tweet_time"><a href="{tweet_url}" title="view tweet on twitter">{tweet_relative_time}</a></span>',a),a.text=r('<span class="tweet_text">{tweet_text_fancy}</span>',a),a.reply_action=r('<a class="tweet_action tweet_reply" href="{reply_url}">reply</a>',a),a.retweet_action=r('<a class="tweet_action tweet_retweet" href="{retweet_url}">retweet</a>',a),a.favorite_action=r('<a class="tweet_action tweet_favorite" href="{favorite_url}">favorite</a>',a),a}var w=e.extend({username:null,list:null,favorites:!1,query:null,avatar_size:null,count:3,fetch:null,page:1,retweets:!0,intro_text:null,outro_text:null,join_text:null,auto_join_text_default:"i said,",auto_join_text_ed:"i",auto_join_text_ing:"i am",auto_join_text_reply:"i replied to",auto_join_text_url:"i was looking at",loading_text:null,refresh_interval:null,twitter_url:"twitter.com",twitter_api_url:"api.twitter.com",twitter_search_url:"search.twitter.com",template:"{avatar}{time}{join}{text}",comparator:function(e,t){return t.tweet_time-e.tweet_time},filter:function(e){return!0}},t),p=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi;return e.extend({tweet:{t:r}}),e.fn.extend({linkUser:a(/(^|[\W])@(\w+)/gi,'$1@<a href="http://'+w.twitter_url+'/$2">$2</a>'),linkHash:a(/(?:^| )[\#]+([\w\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0600-\u06ff]+)/gi,' <a href="http://'+w.twitter_search_url+"/search?q=&tag=$1&lang=all"+(w.username&&1==w.username.length&&!w.list?"&from="+w.username.join("%2BOR%2B"):"")+'">#$1</a>'),capAwesome:a(/\b(awesome)\b/gi,'<span class="awesome">$1</span>'),capEpic:a(/\b(epic)\b/gi,'<span class="epic">$1</span>'),makeHeart:a(/(&lt;)+[3]/gi,"<tt class='heart'>&#x2665;</tt>")}),this.each(function(t,a){var n=e('<ul class="tweet_list">'),i='<p class="tweet_intro">'+w.intro_text+"</p>",s='<p class="tweet_outro">'+w.outro_text+"</p>",o=e('<p class="loading">'+w.loading_text+"</p>");w.username&&"string"==typeof w.username&&(w.username=[w.username]),e(a).bind("tweet:load",function(){w.loading_text&&e(a).empty().append(o),e.getJSON(u(),function(t){e(a).empty().append(n),w.intro_text&&n.before(i),n.empty();var o=e.map(t.results||t,c);o=e.grep(o,w.filter).sort(w.comparator).slice(0,w.count),n.append(e.map(o,function(e){return"<li>"+r(w.template,e)+"</li>"}).join("")).children("li:first").addClass("tweet_first").end().children("li:odd").addClass("tweet_even").end().children("li:even").addClass("tweet_odd"),w.outro_text&&n.after(s),e(a).trigger("loaded").trigger(0===o.length?"empty":"full"),w.refresh_interval&&window.setTimeout(function(){e(a).trigger("tweet:load")},1e3*w.refresh_interval)})}).trigger("tweet:load")})}}(jQuery),jQuery(function(e){e(".tm_tweet").tweet({username:"templatehelpcom",join_text:"auto",count:4,auto_join_text_default:"we said,",auto_join_text_ed:"we",auto_join_text_ing:"we were",auto_join_text_reply:"we replied to",auto_join_text_url:"we were checking out",loading_text:"loading tweets..."})});